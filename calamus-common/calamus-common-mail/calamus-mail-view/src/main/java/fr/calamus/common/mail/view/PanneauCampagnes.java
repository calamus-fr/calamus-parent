package fr.calamus.common.mail.view;import fr.calamus.common.mail.core.ControleurMail;import fr.calamus.common.mail.core.ISensibleAConnexionMail;import fr.calamus.common.mail.model.ModeleMailMap;import fr.calamus.view.base.ComboChoixEtLabel;import java.awt.BorderLayout;import java.awt.GridLayout;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.awt.event.ItemEvent;import java.awt.event.ItemListener;import java.util.List;import java.util.Vector;import javax.swing.JOptionPane;import javax.swing.JPanel;import javax.swing.UIManager;import org.apache.commons.logging.Log;import org.apache.commons.logging.LogFactory;import org.jdesktop.swingx.JXButton;import org.jdesktop.swingx.JXLabel;import org.jdesktop.swingx.JXTaskPane;import org.jdesktop.swingx.JXTaskPaneContainer;import org.jdesktop.swingx.plaf.basic.BasicTaskPaneContainerUI;import org.jdesktop.swingx.plaf.nimbus.NimbusTaskPaneUI;public class PanneauCampagnes extends JPanel implements ISensibleAConnexionMail, IReceveurChoixSmtp {	private static final long serialVersionUID = 6200375326995972277L;	private ComboChoixSmtp choixSmtp;	private ComboChoixEtLabel choixModele;	private JXButton boutonModifModele;	private ComboChoixEtLabel choixListe;	private JXTaskPaneContainer tpc;	private JXTaskPane tp1;	private JXTaskPane tp2;	private JXTaskPane tp3;	private JXLabel campagneEnCours;	private JXLabel campagnesPassees;	private static final Log log = LogFactory.getLog(PanneauCampagnes.class);	private ModeleMailMap modeleMail;	private List<ModeleMailMap> modelesMail;	private int nSmtp;	private JXButton boutonDemarrerCampagne;	// private RapportCampagne rapportCampagne;	public PanneauCampagnes(){		super(new BorderLayout());		modeleMail=null;		nSmtp=0;		modelesMail=ControleurMail.getInstance().getModelesMail();		creerComposants();		afficherComposants();	}	private void creerComposants(){		choixSmtp = new ComboChoixSmtp(this);		choixModele = new ComboChoixEtLabel("Choix d'un modèle :", new Vector<String>(), new ItemListener(){			@Override			public void itemStateChanged(ItemEvent e){				// TODO itemStateChanged				throw new UnsupportedOperationException();			}		});		boutonModifModele = new JXButton("Modifier le modèle choisi...");		boutonModifModele.setName("pasGris");		boutonModifModele.addActionListener(new ActionListener(){			@Override			public void actionPerformed(ActionEvent e){				JOptionPane.showMessageDialog(boutonModifModele, new PanneauEditionModeleMail());			}		});		boutonDemarrerCampagne = new JXButton("Démarrer la campagne");		boutonDemarrerCampagne.setName("pasGris");		boutonDemarrerCampagne.addActionListener(new ActionListener(){			@Override			public void actionPerformed(ActionEvent e){				// TODO actionPerformed				throw new UnsupportedOperationException();			}		});		choixListe = new ComboChoixEtLabel("Choix de la liste de destinataires :", new Vector<String>(),				new ItemListener(){					@Override					public void itemStateChanged(ItemEvent e){						// TODO itemStateChanged						throw new UnsupportedOperationException();					}				});		campagneEnCours = new JXLabel("Aucune campagne en cours");		campagnesPassees = new JXLabel("Votre historique est vide.");		// rapportCampagne = new RapportCampagne();		tpc = new JXTaskPaneContainer();		//SubstanceLookAndFeel.setDecorationType(tpc, DecorationAreaType.NONE);		tp1 = new JXTaskPane("Nouvelle campagne");		tp2 = new JXTaskPane("Campagne en cours");		tp3 = new JXTaskPane("Campagnes terminées");		if(UIManager.getLookAndFeel().getID().equals("Nimbus")){			log.debug("Nimbus detected");			tpc.setUI(new BasicTaskPaneContainerUI());			tp1.setUI(new NimbusTaskPaneUI());			tp2.setUI(new NimbusTaskPaneUI());			tp3.setUI(new NimbusTaskPaneUI());		}	}	private void afficherComposants(){		JPanel pb = new JPanel(new GridLayout(1, 2));		if(!ControleurMail.getInstance().getModele().isSmtp2Enabled()){			//choixSmtp.setVisible(false);		}else tp1.add(choixSmtp);		tp1.add(choixListe);		tp1.add(choixModele);		pb.add(boutonModifModele);		pb.add(boutonDemarrerCampagne);		tp1.add(pb);		tp2.add(campagneEnCours);		tp3.add(campagnesPassees);		tpc.add(tp1);		tpc.add(tp2);		tpc.add(tp3);		// GridBagConstraints c = new GridBagConstraints(0, 0, 3, 1, 1, 0, GridBagConstraints.WEST,		// GridBagConstraints.HORIZONTAL, new Insets(1, 1, 1, 1), 1, 1);		/*		 * add(choixSmtp, c); c.gridy++; add(choixModele, c); c.gridy++; add(boutonModifModele, c); c.gridy++;		 * add(choixListe, c); c.gridy++;		 */		// c.gridheight=6;		add(tpc, BorderLayout.CENTER);		log.debug("tpc ui="+tpc.getUI().getClass());		// c.gridy++;	}	@Override	public void connectionMailEtablie(int n){		// TODO connectionMailEtablie(int n)	}	@Override	public void changerChoix(int n){		// TODO changerChoix(int n)	}	@Override	public void connectionMailFermee(int n){		// TODO connectionMailFermee	}}